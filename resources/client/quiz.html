<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        "use strict";

        function getQuestionList() {
            console.log("Invoked getQuestionList()");		//console.log your BFF for debugging client side

            let quizId = sessionStorage.getItem("QuizID")   //get QuizID from sessions storage
            const url = "/quiz/listQuestions/";		// API method on webserver will be in Eaten class with @Path of list

            fetch(url + quizId, {        			// dateEaten as path param
                method: "GET",
            }).then(response => {
                return response.json();                 //return response to JSON
            }).then(response => {
                if (response.hasOwnProperty("Error")) { //checks if response from server has a key "Error"
                    alert(JSON.stringify(response));    // if it does, convert JSON object to string and alert
                } else {
                    formatQuestionList(response);
                }
            });

        }

        function formatQuestionList(response){
            console.log(response);

            let dataHTML = "";
            for (let item of response) {                            //creates a table with rows for every item in JSON array and a button - how cool?  Very
                dataHTML += "<tr><td>" + item.QuestionId + "</td><td>" + item.QuestionText + "</td><td>" + "<button class='alertItemName'  data-itemID='" + item.CorrectAnswer + "'>Click Me</button>" + item.AnswerA + "</td><td>" + "<button onclick= answerClick() >item.AnswerB</button>" + item.AnswerB + "</td><td>" + item.AnswerC + "</td><td>" + item.AnswerD + "</td></tr>";
                document.addEventListener("click", function (event) {
                    if (event.target.matches('.alertItemName')) {                      //alertItemName is the class we gave all the button elements
                        var CorrectAnswer = event.target.getAttribute("data-itemID");        //data-itemID is an attribute we gave the button
                        alert("You clicked on " + item.CorrectAnswer);
                    }
                });
                }
            }
            document.getElementById("tblQuestions").innerHTML += dataHTML;

        }

    </script>

</head>
<body onload="getQuestionList()">


<table id="tblQuestions"></table>

</body>
</html>